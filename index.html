<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador de Archivos</title>
</head>
<body>
    <h1>Explorador de Archivos</h1>
    <div id="navegacion"></div>
    <ul id="lista-archivos"></ul>

    <script>
        const usuario = "L0wis"; // Tu usuario de GitHub
        const repositorio = "oficialLOwis"; // Nombre del repositorio
        let rutaActual = ""; // Ruta dentro del repositorio

        function cargarContenido(ruta) {
            let url = `https://api.github.com/repos/${usuario}/${repositorio}/contents/${ruta}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    let lista = document.getElementById("lista-archivos");
                    let navegacion = document.getElementById("navegacion");

                    lista.innerHTML = "";
                    navegacion.innerHTML = `<button onclick="volver()">‚¨Ö Atr√°s</button> <strong>Ruta: /${ruta}</strong>`;

                    let tieneIndex = data.some(item => item.name === "index.html");

                    if (tieneIndex) {
                        // Si la carpeta tiene index.html, abrirlo autom√°ticamente
                        window.location.href = `https://raw.githack.com/${usuario}/${repositorio}/main/${ruta}/index.html`;
                        return;
                    }

                    data.forEach(item => {
                        let li = document.createElement("li");

                        if (item.type === "dir") {
                            // Si es carpeta, al hacer clic intenta abrir index.html dentro de ella
                            li.innerHTML = `<a href="#" onclick="cargarContenido('${item.path}')">üìÅ ${item.name}</a>`;
                        } else {
                            // Si es un archivo HTML o JS, abrir con raw.githack.com
                            if (item.name.endsWith(".html") || item.name.endsWith(".js")) {
                                li.innerHTML = `<a href="https://raw.githack.com/${usuario}/${repositorio}/main/${item.path}" target="_blank">üìÑ ${item.name}</a>`;
                            } else {
                                li.innerHTML = `<a href="${item.download_url}" target="_blank">üìÑ ${item.name}</a>`;
                            }
                        }

                        lista.appendChild(li);
                    });

                    rutaActual = ruta;
                })
                .catch(error => console.error("Error al obtener archivos:", error));
        }

        function volver() {
            if (rutaActual !== "") {
                let partes = rutaActual.split("/");
                partes.pop();
                let nuevaRuta = partes.join("/");
                cargarContenido(nuevaRuta);
            }
        }

        cargarContenido("");
    </script>
</body>
</html>
